<?php  

namespace PGF\Mesh;

use PGF\Exception;

class MeshManager
{
    /**
     * An array of loaded meshes
     */
    protected $meshes = [];

    /**
     * Adds a mesh to the manager
     *
     * @param string                $name
     * @param MeshInterface         $mesh
     */
    public function add(string $name, MeshInterface $mesh)
    {
        $this->meshes[$name] = $mesh;
    }

    /**
     * Loads a mesh from file 
     *
     * @param string            $name
     * @param string            $path Path to the php file to require  
     */
    public function load(string $name, string $path)
    {
        $this->add($name, new TexturedMesh(require $path));
    }

    /**
     * Get a mesh from the manager
     *
     * @param string            $name
     */
    public function get(string $name) : MeshInterface
    {
        return $this->meshes[$name];
    }

    /**
     * Construct
     */
    public function __construct()
    {
        // initally create primitives
        $this->add('primitives.cube', new TexturedMesh([
            1,          1,          -1,         0.577349,          0.577349,          -0.577349,         0,          0,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         1,          1,
            -1,         1,          -1,         -0.577349,         0.577349,          -0.577349,         0,          1,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          1,          0,
            1,          -1,         1,          0.577349,          -0.577349,         0.577349,          0,          1,
            1,          1,          1,          0.577349,          0.577349,          0.577349,          0,          0,
            1,          1,          1,          0.577349,          0.577349,          0.577349,          1,          0,
            1,          -1,         -1,         0.577349,          -0.577349,         -0.577349,         0,          1,
            1,          1,          -1,         0.577349,          0.577349,          -0.577349,         0,          0,
            1,          -1,         1,          0.577349,          -0.577349,         0.577349,          1,          0,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         0,          1,
            1,          -1,         -1,         0.577349,          -0.577349,         -0.577349,         0,          0,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         0,          0,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          1,          1,
            -1,         1,          -1,         -0.577349,         0.577349,          -0.577349,         0,          1,
            1,          1,          -1,         0.577349,          0.577349,          -0.577349,         1,          0,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          0,          1,
            1,          1,          1,          0.577349,          0.577349,          0.577349,          0,          0,
            1,          1,          -1,         0.577349,          0.577349,          -0.577349,         0,          0,
            1,          -1,         -1,         0.577349,          -0.577349,         -0.577349,         1,          0,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         1,          1,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          1,          0,
            -1,         -1,         1,          -0.577349,         -0.577349,         0.577349,          1,          1,
            1,          -1,         1,          0.577349,          -0.577349,         0.577349,          0,          1,
            1,          1,          1,          0.577349,          0.577349,          0.577349,          1,          0,
            1,          -1,         1,          0.577349,          -0.577349,         0.577349,          1,          1,
            1,          -1,         -1,         0.577349,          -0.577349,         -0.577349,         0,          1,
            1,          -1,         1,          0.577349,          -0.577349,         0.577349,          1,          0,
            -1,         -1,         1,          -0.577349,         -0.577349,         0.577349,          1,          1,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         0,          1,
            -1,         -1,         -1,         -0.577349,         -0.577349,         -0.577349,         0,          0,
            -1,         -1,         1,          -0.577349,         -0.577349,         0.577349,          1,          0,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          1,          1,
            1,          1,          -1,         0.577349,          0.577349,          -0.577349,         1,          0,
            -1,         1,          -1,         -0.577349,         0.577349,          -0.577349,         1,          1,
            -1,         1,          1,          -0.577349,         0.577349,          0.577349,          0,          1,
        ]))
    }
}